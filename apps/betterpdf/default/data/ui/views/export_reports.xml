<form version="1.1">
  <!-- hideEdit="true"> -->
  <label>Export Searches, Reports, and Alerts</label>
  <fieldset submitButton="false">
    <input type="dropdown" token="app">
      <label>App</label>
      <choice value="*">All</choice>
      <default>betterpdf</default>
      <initialValue>*</initialValue>
      <fieldForLabel>display</fieldForLabel>
      <fieldForValue>fsname</fieldForValue>
      <search>
        <query>| rest /services/apps/local | search disabled=0 | table label id 
| eval fsname=mvindex(split(id,"/"),-1) | eval display=label+" ("+fsname+")"</query>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </search>
    </input>
    <input type="dropdown" token="owner">
      <label>User</label>
      <choice value="*">All</choice>
      <fieldForLabel>display</fieldForLabel>
      <fieldForValue>title</fieldForValue>
      <search>
        <query>| rest /services/authentication/users splunk_server=local search=(eai:acl.owner="*") f=title f=realname | where NOT username="splunk-system-user" | eval display=realname+" ("+title+")"</query>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="chart">
      <label>Chart</label>
      <fieldForLabel>display_value</fieldForLabel>
      <fieldForValue>url_fragment</fieldForValue>
      <search>
        <query>| rest splunk_server=local /services/betterpdf charttypes=true | table display_value,url_fragment</query>
      </search>
    </input>
  </fieldset>
  <row>
    <panel>
      <table>
        <search>
          <query>| rest splunk_server=local /servicesNS/-/-/saved/searches/  
| search disabled!=1
| eval downloadurl="/splunkd/__raw/services/betterpdf?savedsearch="+mvindex(split(id,"/"),-1)+"$chart$"
| rename eai:acl.* as *
| rename title as Title owner as Owner sharing as Sharing app as App next_scheduled_time as "Next Scheduled Time"
|  search App=$app$ Owner=$owner$
| table Title,"Next Scheduled Time",Owner,App,Sharing,downloadurl</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">10</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
        <fields>["Title","Next Scheduled Time","Owner","App","Sharing"]</fields>
        <drilldown>
          <link target="_blank">$row.downloadurl|n$</link>
        </drilldown>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <html>Dashboard source:<br/>
    <pre>
          <![CDATA[
<form version="1.1">
  <!-- hideEdit="true"> -->
  <label>Export Searches, Reports, and Alerts</label>
  <fieldset submitButton="false">
    <input type="dropdown" token="app">
      <label>App</label>
      <choice value="*">All</choice>
      <default>betterpdf</default>
      <initialValue>*</initialValue>
      <fieldForLabel>display</fieldForLabel>
      <fieldForValue>fsname</fieldForValue>
      <search>
        <query>| rest /services/apps/local | search disabled=0 | table label id 
| eval fsname=mvindex(split(id,"/"),-1) | eval display=label+" ("+fsname+")"</query>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </search>
    </input>
    <input type="dropdown" token="owner">
      <label>User</label>
      <choice value="*">All</choice>
      <fieldForLabel>display</fieldForLabel>
      <fieldForValue>title</fieldForValue>
      <search>
        <query>| rest /services/authentication/users splunk_server=local search=(eai:acl.owner="*") f=title f=realname | where NOT username="splunk-system-user" | eval display=realname+" ("+title+")"</query>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="chart">
      <label>Chart</label>
      <fieldForLabel>display_value</fieldForLabel>
      <fieldForValue>url_fragment</fieldForValue>
      <search>
        <query>| rest splunk_server=local /services/betterpdf charttypes=true | table display_value,url_fragment</query>
      </search>
    </input>
  </fieldset>
  <row>
    <panel>
      <table>
        <search>
          <query>| rest splunk_server=local /servicesNS/-/-/saved/searches/  
| search disabled!=1
| eval downloadurl="/splunkd/__raw/services/betterpdf?savedsearch="+mvindex(split(id,"/"),-1)+"$chart$"
| rename eai:acl.* as *
| rename title as Title owner as Owner sharing as Sharing app as App next_scheduled_time as "Next Scheduled Time"
|  search App=$app$ Owner=$owner$
| table Title,"Next Scheduled Time",Owner,App,Sharing,downloadurl</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">10</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
        <fields>["Title","Next Scheduled Time","Owner","App","Sharing"]</fields>
        <drilldown>
          <link target="_blank">$row.downloadurl|n$</link>
        </drilldown>
      </table>
    </panel>
  </row>
</form>
]]>
        </pre>
  </html>
    </panel>
  </row>
</form>